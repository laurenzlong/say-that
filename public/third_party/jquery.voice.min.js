/**
 * jQuery Voice plugin 0.3 (31st May 2015)
 * Copyright Subin Siby - http://subinsb.com
 * 
 * ------------------
 * Licensed under MIT
 * ------------------
 * 
 * A jQuery plugin to record, play & download microphone input sound from the user.
 * NEEDS recorder.js and recorderWorker.js to work - https://github.com/mattdiamond/Recorderjs
 * 
 * To use MP3 conversion, NEEDS mp3Worker.js, libmp3lame.min.js and recorder.js from https://github.com/nusofthq/Recordmp3js/tree/master/js
 *
 * Full Documentation & Support - http://subinsb.com/html5-record-mic-voice
*/
window.Fr=window.Fr||{},function(){Fr.voice={workerPath:"third_party/recorderWorker.js",mp3WorkerPath:"third_party/mp3Worker.js",stream:!1,init_called:!1,init:function(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL,navigator.getUserMedia===!1&&alert("getUserMedia() is not supported in your browser"),this.context=new AudioContext}catch(t){alert("Web Audio API is not supported in this browser")}},record:function(t,e){this.init_called===!1&&(this.init(),this.init_called=!0),$that=this,navigator.getUserMedia({audio:!0},function(r){var i=$that.context.createMediaStreamSource(r);t===!0&&i.connect($that.context.destination),$that.recorder=new Recorder(i,{workerPath:$that.workerPath,mp3WorkerPath:$that.mp3WorkerPath}),$that.stream=r,$that.recorder.record(),e(r)},function(){alert("No live audio input")})},stop:function(){return this.recorder.stop(),this.recorder.clear(),this.stream.getTracks().forEach(function (track) { track.stop(); }),this},"export":function(t,e){"mp3"==e?this.recorder.exportMP3(t):this.recorder.exportWAV(function(r){if(""==e||"blob"==e)t(r);else if("base64"==e){var i=new window.FileReader;i.readAsDataURL(r),i.onloadend=function(){base64data=i.result,t(base64data)}}else if("URL"==e){var o=URL.createObjectURL(r);t(o)}})}}}(jQuery);
